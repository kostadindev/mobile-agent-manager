@import "tailwindcss";
@import "konsta/theme.css";

@theme {
  --color-brand-primary: #7c6aef;

  --color-agent-email: #3B82F6;
  --color-agent-slack: #A855F7;
  --color-agent-jira: #F97316;
  --color-agent-calendar: #22C55E;
  --color-agent-search: #06B6D4;

  --color-surface: var(--theme-surface);
  --color-surface-1: var(--theme-surface-1);
  --color-surface-2: var(--theme-surface-2);
  --color-on-surface: var(--theme-on-surface);
  --color-on-surface-secondary: var(--theme-on-surface-secondary);
  --color-on-surface-muted: var(--theme-on-surface-muted);
  --color-border: var(--theme-border);
  --color-hover: var(--theme-hover);
  --color-control-bg: var(--theme-control-bg);
}

/* Light theme (default) */
:root {
  --theme-surface: #ffffff;
  --theme-surface-1: #f2f2f7;
  --theme-surface-2: #e5e5ea;
  --theme-on-surface: #000000;
  --theme-on-surface-secondary: #3c3c43;
  --theme-on-surface-muted: #8e8e93;
  --theme-border: rgba(0, 0, 0, 0.08);
  --theme-hover: rgba(0, 0, 0, 0.04);
  --theme-control-bg: rgba(0, 0, 0, 0.06);
}

/* Dark theme */
.dark {
  --theme-surface: #000000;
  --theme-surface-1: #1c1c1d;
  --theme-surface-2: #121212;
  --theme-on-surface: #ffffff;
  --theme-on-surface-secondary: #ffffffcc;
  --theme-on-surface-muted: #ffffff66;
  --theme-border: rgba(255, 255, 255, 0.08);
  --theme-hover: rgba(255, 255, 255, 0.04);
  --theme-control-bg: rgba(255, 255, 255, 0.06);
}

html, body, #root {
  height: 100%;
  width: 100%;
  overflow: hidden;
  background-color: var(--theme-surface);
  color: var(--theme-on-surface);
  transition: background-color 0.2s, color 0.2s;
}

/* Full-width chat messages */
.k-message {
  max-width: 100% !important;
}

/* React Flow */
.react-flow__node { font-family: inherit; }
.react-flow__attribution { display: none !important; }

/* Scrollbar */
::-webkit-scrollbar { width: 0; background: transparent; }

/* Node pulse */
@keyframes pulse-ring {
  0% { box-shadow: 0 0 0 0 rgba(124, 106, 239, 0.5); }
  70% { box-shadow: 0 0 0 10px rgba(124, 106, 239, 0); }
  100% { box-shadow: 0 0 0 0 rgba(124, 106, 239, 0); }
}
.node-running { animation: pulse-ring 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite; }

/* Edge dash flow */
@keyframes dash-flow { to { stroke-dashoffset: -20; } }
.edge-active path {
  stroke-dasharray: 5 5;
  animation: dash-flow 0.6s linear infinite;
}

/* Checkpoint glow */
@keyframes checkpoint-glow {
  0%, 100% { box-shadow: 0 0 8px rgba(245, 158, 11, 0.4); }
  50% { box-shadow: 0 0 20px rgba(245, 158, 11, 0.7); }
}
.checkpoint-awaiting { animation: checkpoint-glow 2s ease-in-out infinite; }

/* Focus-visible accessibility (F7) */
button:focus-visible,
[role="button"]:focus-visible,
input:focus-visible,
textarea:focus-visible,
a:focus-visible {
  outline: 2px solid #7c6aef;
  outline-offset: 2px;
}
